<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TypeScript Test - Servo Light</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 {
            color: #2563eb;
        }
        .test-box {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .result {
            font-weight: bold;
            color: #16a34a;
        }
        .error {
            color: #dc2626;
        }
        code {
            background: #e5e7eb;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <h1>üöÄ TypeScript in Servo-Light Browser</h1>

    <div class="test-box">
        <h2>Test 0: Basic TypeScript from source src="test-typescript.ts" type="text/typescript"</h2>
        <p>Testing test-typescript.ts via tag</p>
        <div id="test0">Waiting...</div>
    </div>
    <script type="text/typescript" src="test-typescript.ts"></script>

    <div class="test-box">
        <h2>Test 1: Basic TypeScript</h2>
        <p>Testing type annotations and basic compilation...</p>
        <div id="test1">Waiting...</div>
    </div>

    <div class="test-box">
        <h2>Test 2: Function with Types</h2>
        <p>Testing typed functions...</p>
        <div id="test2">Waiting...</div>
    </div>

    <div class="test-box">
        <h2>Test 3: Interface</h2>
        <p>Testing interface definitions...</p>
        <div id="test3">Waiting...</div>
    </div>

    <div class="test-box">
        <h2>Test 4: Generic Function</h2>
        <p>Testing generic type parameters...</p>
        <div id="test4">Waiting...</div>
    </div>

    <!-- TEST 1: Basic TypeScript -->
    <script type="text/typescript">
        const greeting: string = "Hello from TypeScript!";
        const version: number = 1.0;

        document.getElementById('test1').innerHTML =
            `<span class="result">‚úì PASS:</span> ${greeting} (v${version})`;
    </script>

    <!-- TEST 2: Function with Types -->
    <script type="text/typescript">
        function add(a: number, b: number): number {
            return a + b;
        }

        const result: number = add(42, 8);

        document.getElementById('test2').innerHTML =
            `<span class="result">‚úì PASS:</span> 42 + 8 = ${result}`;
    </script>

    <!-- TEST 3: Interface -->
    <script type="text/typescript">
        interface Person {
            name: string;
            age: number;
        }

        const user: Person = {
            name: "Servo User",
            age: 25
        };

        document.getElementById('test3').innerHTML =
            `<span class="result">‚úì PASS:</span> ${user.name}, age ${user.age}`;
    </script>

    <!-- TEST 4: Generic Function -->
    <script type="text/typescript">
        function identity<T>(value: T): T {
            return value;
        }

        const numberResult = identity<number>(123);
        const stringResult = identity<string>("TypeScript Works!");

        document.getElementById('test4').innerHTML =
            `<span class="result">‚úì PASS:</span> Generic: ${numberResult}, "${stringResult}"`;
    </script>

    <!-- Summary Script -->
    <script type="text/javascript">
        // Check if all tests completed
        setTimeout(() => {
            const tests = ['test0', 'test1', 'test2', 'test3', 'test4'];
            const results = tests.map(id => {
                const el = document.getElementById(id);
                return el && el.innerHTML.includes('‚úì PASS');
            });

            const allPassed = results.every(r => r);

            if (allPassed) {
                document.body.insertAdjacentHTML('beforeend',
                    '<div class="test-box" style="background: #dcfce7; border: 2px solid #16a34a;">' +
                    '<h2 style="color: #16a34a;">üéâ All Tests Passed!</h2>' +
                    '<p>TypeScript is working correctly in Servo-Light browser!</p>' +
                    '</div>');
            } else {
                document.body.insertAdjacentHTML('beforeend',
                    '<div class="test-box" style="background: #fee2e2; border: 2px solid #dc2626;">' +
                    '<h2 class="error">‚ùå Some Tests Failed</h2>' +
                    '<p>Check the console for errors.</p>' +
                    '</div>');
            }
        }, 1000);
    </script>
</body>
</html>
